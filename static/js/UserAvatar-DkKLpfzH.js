import{_ as w,a as T,b as F,i as ee,u as te,c as X,d as ne,e as oe}from"./index-CYfdo8ub.js";import{d as W,ad as Y,l as a,T as g,S as d,P as r,u as l,$ as G,V as H,W as E,a0 as Q,m as f,X as A,Q as C,ax as z,a8 as P,ay as N,r as U,c as le,p as x,G as D,H as se,L as ce,w as ae,_ as q,n as re,F as ue,b as ie}from"./vue-3R-0LehK.js";import{i as de,j as Z,k as me,l as _e,m as pe,n as J,o as fe,p as he,q as be,r as ge,E as K,s as xe}from"./element-BKD3LWCk.js";import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                  *//* empty css                  */const ke={__name:"SideLogo",setup(e){const o=T(),t="BZ Admin",s=W(()=>new URL("/bz-admin/static/png/name-D3oTfwvL.png",import.meta.url).href);return(n,c)=>{const m=de,_=Z,i=Y("router-link");return a(),g(i,{class:"logo-wrap flex flex-center",to:"/"},{default:d(()=>[r(m,{class:"logo",src:l(s),fit:"cover"},null,8,["src"]),G(r(_,{class:"title ml-10",truncated:""},{default:d(()=>[H(E(l(t)),1)]),_:1},512),[[Q,!l(o).collapse]])]),_:1})}}},Ke=w(ke,[["__scopeId","data-v-9698a9aa"]]),we={key:0,class:"el-icon"},ve={__name:"SubItem",props:{title:{type:String,required:!0},icon:{type:String,default:""}},setup(e){return(o,t)=>{const s=F,n=Z;return a(),f(C,null,[e.icon?(a(),f("i",we,[r(s,{name:e.icon},null,8,["name"])])):A("",!0),r(n,{truncated:""},{default:d(()=>[H(E(e.title),1)]),_:1})],64)}}},B=w(ve,[["__scopeId","data-v-25165209"]]),Se={__name:"SideItem",props:{route:{type:Object,default:()=>({}),required:!0}},setup(e){const o=z();function t(s){ee(s)?window.open(s):o.push(s)}return(s,n)=>{const c=Y("SideItem",!0),m=me,_=_e;return e.route.children&&e.route.children.length>1?(a(),g(m,{key:0,index:e.route.name},{title:d(()=>[r(l(B),{title:e.route.title,icon:e.route.icon},null,8,["title","icon"])]),default:d(()=>[(a(!0),f(C,null,P(e.route.children,i=>(a(),g(c,{key:i.path,route:i},null,8,["route"]))),128))]),_:1},8,["index"])):e.route.children&&e.route.children.length===1?(a(),g(_,{key:1,index:e.route.children[0].name,onClick:n[0]||(n[0]=i=>t(e.route.children[0].path))},{default:d(()=>[r(l(B),{title:e.route.children[0].title,icon:e.route.children[0].icon},null,8,["title","icon"])]),_:1},8,["index"])):(a(),g(_,{key:2,index:e.route.name,onClick:n[1]||(n[1]=i=>t(e.route.path))},{default:d(()=>[r(l(B),{title:e.route.title,icon:e.route.icon},null,8,["title","icon"])]),_:1},8,["index"]))}}},ye=w(Se,[["__scopeId","data-v-88a25bb6"]]),Ee={__name:"index",setup(e){const o=T(),{menus:t}=te(),s=N(),n=U(s.name);return(c,m)=>{const _=pe;return a(),g(_,{class:"cus-scroll-y",collapse:l(o).collapse,"default-active":l(n),"unique-opened":!0,"collapse-transition":!1},{default:d(()=>[(a(!0),f(C,null,P(l(t),i=>(a(),g(l(ye),{key:i.name,route:i},null,8,["route"]))),128))]),_:1},8,["collapse","default-active"])}}},et=w(Ee,[["__scopeId","data-v-f215cc6d"]]),Ce=["onClick"],Fe={__name:"ContextMenu",props:{show:{type:Boolean,default:!1},currentPath:{type:String,default:""},x:{type:Number,default:0},y:{type:Number,default:0}},emits:["update:show"],setup(e,{emit:o}){const t=e,s=o,n=X(),c=N(),m=W(()=>[{label:"刷新",key:"reload",disabled:t.currentPath!==n.activeTab,icon:"refresh"},{label:"关闭其他",key:"close-other",disabled:n.tabs.length<=1,icon:"close-other"},{label:"关闭左侧",key:"close-left",disabled:n.tabs.length<=1||t.currentPath===n.tabs[0].path,icon:"arrow-expand-left"},{label:"关闭右侧",key:"close-right",disabled:n.tabs.length<=1||t.currentPath===n.tabs[n.tabs.length-1].path,icon:"arrow-expand-right"}]),_=new Map([["reload",()=>{n.reloadTab(c.fullPath,c.meta?.keepAlive)}],["close-other",()=>{n.removeOther(t.currentPath)}],["close-left",()=>{n.removeLeft(t.currentPath)}],["close-right",()=>{n.removeRight(t.currentPath)}]]),i=()=>{s("update:show",!1)},S=b=>{const M=_.get(b);M&&M(),i()};return le(()=>{document.body.addEventListener("click",i)}),(b,M)=>{const L=F;return G((a(),f("div",{key:Math.random(),"aria-hidden":"true","data-popper-placement":"bottom",role:"tooltip",class:"custom-contextmenu",style:se(`top: ${e.y+5}px;left: ${e.x}px;`)},[x("ul",null,[(a(!0),f(C,null,P(l(m),u=>(a(),f("li",{key:u.key,class:D(["contextmenu-item pointer",{"contextmenu-item-disabled":u.disabled===!0}]),"aria-disabled":"false",onClick:p=>S(u.key)},[r(L,{name:u.icon},null,8,["name"]),x("span",null,E(u.label),1)],10,Ce))),128))])],4)),[[Q,e.show]])}}},Me=w(Fe,[["__scopeId","data-v-03708d30"]]),$e={class:"tab-list"},Ie=["onClick","onContextmenu"],Pe={class:"tab-label"},Te={__name:"index",setup(e){const o=N(),t=z(),s=X(),n=U(),c=ce({show:!1,x:0,y:0,currentPath:""});function m(){c.show=!0}function _(){c.show=!1}function i(u,p,y){Object.assign(c,{x:u,y:p,currentPath:y})}function S(){const u=["/404","/403","/login"],p=l(t.currentRoute);if(u.includes(p.path))return;const{name:y,fullPath:$}=p,R=p.meta?.title,k=p.meta?.icon,I=p.meta?.keepAlive;s.addTab({name:y,path:$,title:R,icon:k,keepAlive:I})}ae(o,()=>{S()},{immediate:!0,deep:!0});const b=u=>{const p=u.wheelDelta||-u.deltaY*40;n.value.setScrollLeft(n.value.wrapRef.scrollLeft-p)},M=u=>{s.setActiveTab(u),t.push(u)};async function L(u,p){const{clientX:y,clientY:$}=u;_(),i(y,$,p),await re(),m()}return(u,p)=>{const y=F,$=J,R=fe;return a(),f(C,null,[r(R,{class:"tab-wrap",ref_key:"scrollbarRef",ref:n,onWheel:q(b,["prevent"])},{default:d(()=>[x("div",$e,[(a(!0),f(C,null,P(l(s).tabs,k=>(a(),f("div",{class:D(["tab-item pointer",{active:k.path===l(o).path}]),key:k.path,onClick:I=>M(k.path),onContextmenu:q(I=>L(I,k.path),["prevent"])},[x("span",Pe,E(k.title),1),r($,{plain:"",class:D(["tab-close ml-6",{affix:l(s).tabs.length===1}]),onClick:q(I=>l(s).removeTab(k.path),["stop"])},{default:d(()=>[x("i",null,[r(y,{name:"close"})])]),_:2},1032,["class","onClick"])],42,Ie))),128))])]),_:1},512),l(c).show?(a(),g(l(Me),{key:0,show:l(c).show,"onUpdate:show":p[0]||(p[0]=k=>l(c).show=k),"current-path":l(c).currentPath,x:l(c).x,y:l(c).y},null,8,["show","current-path","x","y"])):A("",!0)],64)}}},tt=w(Te,[["__scopeId","data-v-78cc59f7"]]),Ae={__name:"MenuCollapse",setup(e){const o=T(),t=()=>{o.collapse=!o.collapse};return(s,n)=>{const c=F;return a(),f("i",{class:"font-16 p-6 pointer",onClick:t},[r(c,{name:l(o).collapse?"expand":"retract"},null,8,["name"])])}}},nt=w(Ae,[["__scopeId","data-v-289cff77"]]),Le={class:"el-dropdown-link flex flex-center"},Re={key:0,class:"font-14 mr-8"},qe={__name:"Dropdown",props:{options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["callback"],setup(e,{emit:o}){const t=o;function s(n){t("callback",n)}return(n,c)=>{const m=F,_=he,i=be,S=ge;return a(),g(S,{class:"pointer",onCommand:s,disabled:e.disabled},{dropdown:d(()=>[r(i,null,{default:d(()=>[(a(!0),f(C,null,P(e.options,b=>(a(),g(_,{class:"dropdown-item",command:b.key,key:b.key},{default:d(()=>[b.icon?(a(),f("i",Re,[r(m,{name:b.icon},null,8,["name"])])):A("",!0),x("span",null,E(b.label),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:d(()=>[x("span",Le,[ue(n.$slots,"title",{},void 0,!0)])]),_:3},8,["disabled"])}}},Be=w(qe,[["__scopeId","data-v-0185db8a"]]),V=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],v=(()=>{if(typeof document>"u")return!1;const e=V[0],o={};for(const t of V)if(t?.[1]in document){for(const[n,c]of t.entries())o[e[n]]=c;return o}return!1})(),O={change:v.fullscreenchange,error:v.fullscreenerror};let h={request(e=document.documentElement,o){return new Promise((t,s)=>{const n=()=>{h.off("change",n),t()};h.on("change",n);const c=e[v.requestFullscreen](o);c instanceof Promise&&c.then(n).catch(s)})},exit(){return new Promise((e,o)=>{if(!h.isFullscreen){e();return}const t=()=>{h.off("change",t),e()};h.on("change",t);const s=document[v.exitFullscreen]();s instanceof Promise&&s.then(t).catch(o)})},toggle(e,o){return h.isFullscreen?h.exit():h.request(e,o)},onchange(e){h.on("change",e)},onerror(e){h.on("error",e)},on(e,o){const t=O[e];t&&document.addEventListener(t,o,!1)},off(e,o){const t=O[e];t&&document.removeEventListener(t,o,!1)},raw:v};Object.defineProperties(h,{isFullscreen:{get:()=>!!document[v.fullscreenElement]},element:{enumerable:!0,get:()=>document[v.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[v.fullscreenEnabled]}});v||(h={isEnabled:!1});const j=h,De={class:"mr-16"},ze={class:"font-14"},Ne={class:"font-14"},Ue={__name:"Tools",setup(e){const o=T();function t(){if(!j.isEnabled)return K.warning("暂不不支持全屏"),!1;j.toggle()}return(s,n)=>{const c=F,m=J;return a(),f("div",De,[r(m,{class:"icon-item",circle:"",onClick:l(o).toggleTheme},{default:d(()=>[x("i",ze,[r(c,{name:l(o).themeMode==="dark"?"dark":"light"},null,8,["name"])])]),_:1},8,["onClick"]),r(m,{class:"icon-item",circle:"",onClick:t},{default:d(()=>[x("i",Ne,[r(c,{name:"fullscreen"})])]),_:1})])}}},ot=w(Ue,[["__scopeId","data-v-c9dacd68"]]),Ve={key:0,class:"ml-12 flex-col flex-center"},Oe={class:"font-14 mb-4"},je={class:"user-role font-12"},Xe={__name:"UserAvatar",setup(e){const o=z(),t=ne(),s=oe(),{proxy:n}=ie(),c=U([{label:"个人资料",key:"profile",icon:"user"},{label:"退出登陆",key:"logout",icon:"logout"}]),m=_=>{switch(_){case"profile":o.push("/profile");break;case"logout":n.$deleteConfirm({title:"确认退出？",message:"提示",thenFn:()=>s.logoutAction().then(()=>{K.success("已退出登录")})});break}};return(_,i)=>{const S=xe,b=Be;return a(),g(b,{options:l(c),onCallback:m},{title:d(()=>[r(S,{size:36,src:l(t).avatar},null,8,["src"]),l(t).userInfo?(a(),f("div",Ve,[x("span",Oe,E(l(t).nickName??l(t).username),1),x("span",je,"["+E(l(t).currentRole?.name)+"]",1)])):A("",!0)]),_:1},8,["options"])}}},lt=w(Xe,[["__scopeId","data-v-8da03faa"]]);export{tt as A,nt as M,Ke as S,ot as T,lt as U,Be as _,et as a};
